<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Game Menghitung</title>
<style>
body, html {
    margin: 0; padding: 0;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

/* Background */
#bgRoom {
    position: fixed;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -2;
}

/* Intro fullscreen */
#introScreen {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:black;
    z-index:9999;
}
#introScreen video {
    width:100%; height:100%;
    object-fit:cover;
}

/* Game Area */
#gameArea {
    position: absolute;
    top:50%; left:50%;
    transform: translate(-50%, -50%);
    width:900px; height:400px;
}

/* Soal */
#questionImg {
    position: absolute;
    left:150px;
    top:35%;
    transform: translateY(-50%);
    width:350px;
}

/* DropZone */
#dropZone {
    position: absolute;
    right:165px;
    top:35%;
    transform: translateY(-50%);
    width:200px; height:150px;
    background-image: url('https://image2url.com/images/1766064534082-1436393b-6f12-42ae-964b-12cc8052d1e7.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
}

/* Jawaban */
#answers {
    position: absolute;
    bottom:0;
    width:100%;
    display:flex;
    justify-content:center;
    gap:50px;
}
.answer {
    width:150px;
    cursor:grab;
}

/* Feedback */
#feedback {
    position:absolute;
    top:20%;
    left:50%;
    transform:translateX(-50%);
    width:250px;
    opacity:0;
    transition: opacity 0.5s;
}

/* Next Button */
#nextBtn {
    position:absolute;
    top:425px;
    left:50%;
    transform:translateX(-50%);
    width:200px;
    opacity:0;
    pointer-events:none;
    transition: opacity 0.5s;
    cursor:pointer;
}

/* End Screen */
#endScreen {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:black;
    z-index:9999;
    display:none;
}
#endScreen video {
    width:100%; height:100%;
    object-fit:cover;
}

/* Setting */
#settingBtnImg {
    position:fixed;
    top:20px;
    right:20px;
    width:150px;
    cursor:pointer;
    z-index:20;
    transition: transform 0.25s ease, filter 0.25s ease;
}
#settingBtnImg:hover { transform:scale(1.12); filter:drop-shadow(0 0 10px rgba(0,0,0,0.6)); }

#settingPanel {
    position:absolute;
    top:50%; left:50%;
    width:320px;
    transform:translate(-50%,-50%) scale(0.7);
    background:rgba(255,255,255,1);
    padding:20px;
    border-radius:15px;
    color:#000;
    opacity:0;
    pointer-events:none;
    box-shadow:0 10px 30px rgba(0,0,0,0.5);
    transition:opacity 0.25s ease, transform 0.25s ease;
    text-align:center;
    z-index:99;
}
#settingPanel.active {
    opacity:1;
    transform:translate(-50%,-50%) scale(1);
    pointer-events:auto;
}
#closeSetting {
    position:absolute; top:10px; right:15px;
    font-size:50px; font-weight:bold; cursor:pointer; color:#333;
    transition: transform 0.2s, color 0.2s;
}
#closeSetting:hover { transform:scale(1.2); color:red; }

/* Slider */
#volumeSlider { width:100%; height:16px; background:#a8ff8a; border-radius:4px; border:2px solid #6fc36f; }
#volumeSlider::-webkit-slider-thumb {
    -webkit-appearance:none; width:20px; height:20px;
    background:#6fc36f; border:2px solid #4b914b; border-radius:4px;
}

/* Mute & Home */
#muteInPanelImg, #homeIcon {
    width:150px; cursor:pointer; margin-top:5px;
    transition:transform .2s, filter .2s;
}
#muteInPanelImg:hover, #homeIcon:hover { transform:scale(1.1); filter:drop-shadow(0 0 8px rgba(0,0,0,0.5)); }
</style>
</head>
<body>

<img id="bgRoom" src="https://image2url.com/images/1766063367909-c754749f-05bc-4a64-a55f-b57db12b7ddf.png">

<!-- Intro Screen -->
<div id="introScreen">
    <video id="introVideo" autoplay muted playsinline>
        <source src="https://image2url.com/videos/1766429836902-d7b39fdc-26d7-4ac6-a03d-856b2f02481d.mp4" type="video/mp4">
    </video>
</div>

<!-- End Screen -->
<div id="endScreen">
    <video src="https://image2url.com/videos/1766425638828-0a38ce97-b599-4dfe-a991-804c340f3a31.mp4" autoplay muted playsinline></video>
</div>

<!-- Game Area -->
<div id="gameArea">
    <img id="questionImg">
    <div id="dropZone"></div>
    <div id="answers"></div>
    <img id="feedback">
    <img id="nextBtn" src="https://image2url.com/images/1766422787767-c3faaea8-0c37-4c9f-a59a-44bfed4aa6c5.png">
</div>

<!-- Setting -->
<img id="settingBtnImg" src="https://image2url.com/images/1763954705793-121a2413-8603-4603-9be7-e543e18c3f3a.png">
<div id="overlay"></div>
<div id="settingPanel">
    <span id="closeSetting">Ã—</span>
    <h3>Pengaturan</h3>
    <label>Volume Musik:</label>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
    <div style="margin-top:15px;">
        <img id="muteInPanelImg" src="https://image2url.com/images/1763955187976-61e3ab1a-0b3b-47c3-8ab0-8f66ccfe1b72.png">
        <img id="homeIcon" src="https://image2url.com/images/1763963926977-0fc775b7-3547-4c49-8fda-22cff486b226.png">
    </div>
</div>

<!-- Audio -->
<audio id="bgMusic" autoplay loop>
  <source src="https://image2url.com/audio/1766430141373-6fde22c5-7ca8-4d6a-85f7-e38614847699.mp3" type="audio/mp3">
</audio>
<audio id="soundNext" preload="auto"><source src="https://f.top4top.io/m_3615q8in01.mp3" type="audio/mp3"></audio>
<audio id="soundTrue"><source src="https://image2url.com/audio/1766430321664-7d45c824-1f21-442d-a70d-69833182cfd5.mp3"></audio>
<audio id="soundFalse"><source src="https://image2url.com/audio/1766426485438-5c58c6bd-783a-4f32-b2f4-39daa5e3c578.mp3"></audio>

<script>
// Intro Video
window.addEventListener("load", () => {
    const introScreen = document.getElementById("introScreen");
    const introVideo = document.getElementById("introVideo");
    introVideo.play().catch(()=>{});

    setTimeout(()=>{
        introScreen.style.display="none";
        initGame();
    }, 6000);
});

// Game Data
const questionsData = [
    {
        soal: "https://image2url.com/images/1766064024529-ff96ca53-bd80-45cb-b072-bd988d1e7cb6.png", //1
        answers: [
            { img: "https://image2url.com/images/1766064886289-ecf2df83-973c-4dbc-bb22-b72f184e2dd3.png", correct: false }, //5
            { img: "https://image2url.com/images/1766064907141-dda76d33-03df-44b4-a4e6-3f41631d546e.png", correct: true }, //6
            { img: "https://image2url.com/images/1766064924737-6128406e-78b8-4997-acd7-88ab4529dbfd.png", correct: false } //10
        ]
    },
    {
        soal: "https://image2url.com/images/1766065667888-7ee96fdf-dc50-442c-98ba-78052a4f62f0.png", //2
        answers: [
            { img: "https://image2url.com/images/1766065752680-815029d0-b689-4d71-85c9-5acfa039eeac.png", correct: false }, //7
            { img: "https://image2url.com/images/1766065780226-64562771-8beb-4a4a-b769-a927d9b3fef2.png", correct: false }, //3
            { img: "https://image2url.com/images/1766065800104-b6678612-501b-47e0-bea4-e1ca2f64552f.png", correct: true } //1
        ]
    },
    {
        soal: "https://image2url.com/images/1766420083397-7d9841bf-05ef-40d4-a7f7-277ab8daa0c9.png", //3 9+9
        answers: [
            { img: "https://image2url.com/images/1766420308335-a78c2e14-7297-4b45-9e6a-a43c1a4c62ea.png", correct: true }, //18
            { img: "https://image2url.com/images/1766420131472-379e0b1d-78dc-48c6-803e-de96afe0d992.png", correct: false }, //4
            { img: "https://image2url.com/images/1766420151549-7f0e92aa-1cdb-4298-ae23-c51887c549b8.png", correct: false } //12
        ]
    },
    {
        soal: "https://image2url.com/images/1766420624297-f9fad9eb-dd56-4625-b419-71119f85d916.png", //4 6+2
        answers: [
            { img: "https://image2url.com/images/1766065800104-b6678612-501b-47e0-bea4-e1ca2f64552f.png", correct: false }, //1
            { img: "https://image2url.com/images/1766064924737-6128406e-78b8-4997-acd7-88ab4529dbfd.png", correct: false }, //10
            { img: "https://image2url.com/images/1766420788151-a427cf98-9905-437e-8822-44037af3a444.png", correct: true } //8
        ]
    },
    {
        soal: "https://image2url.com/images/1766420637195-904b3875-0ba6-482d-aa27-f6eb43dd4c9b.png", //5 9-5
        answers: [
            { img: "https://image2url.com/images/1766420818942-e678ba24-3556-47e8-9d77-d9c318b3b576.png", correct: false }, //13
            { img: "https://image2url.com/images/1766431509329-94379c47-c376-4aec-ab24-486e696ae8bd.png", correct: true }, //4
            { img: "https://image2url.com/images/1766420854891-764e30c9-431b-4bb3-8fa3-2ca1bb681560.png", correct: false } //9
        ]
    },
    {
        soal: "https://image2url.com/images/1766420657577-dea4a87a-b190-40c9-af51-48f541741894.png", //6 1+10
        answers: [
            { img: "https://image2url.com/images/1766420892638-459fe547-d6a0-4bb6-9f56-66aa153e041b.png", correct: false }, //7
            { img: "https://image2url.com/images/1766420907872-d0a143a0-ffe3-41a1-9d19-9f9753b0fb9c.png", correct: true }, //11
            { img: "https://image2url.com/images/1766420931156-6da91d72-2d88-4b38-9a33-5d6828627b81.png", correct: false } //15
        ]
    },
    {
        soal: "https://image2url.com/images/1766420678730-ada834ad-01be-4bc7-b455-5b88f309f7b4.png", //7 11+4
        answers: [
            { img: "https://image2url.com/images/1766420931156-6da91d72-2d88-4b38-9a33-5d6828627b81.png", correct: true }, //15
            { img: "https://image2url.com/images/1766064924737-6128406e-78b8-4997-acd7-88ab4529dbfd.png", correct: false }, //10
            { img: "https://image2url.com/images/1766420308335-a78c2e14-7297-4b45-9e6a-a43c1a4c62ea.png", correct: false } //18
        ]
    },
    {
        soal: "https://image2url.com/images/1766422233151-9a2276d7-a717-43b7-87cf-fa9b91251cbb.png", //8 10-4
        answers: [
            { img: "https://image2url.com/images/1766420991997-3ecae7e7-4292-4537-950b-369efd5fa51f.png", correct: false }, //2
            { img: "https://image2url.com/images/1766064907141-dda76d33-03df-44b4-a4e6-3f41631d546e.png", correct: true }, //6
            { img: "https://image2url.com/images/1766065780226-64562771-8beb-4a4a-b769-a927d9b3fef2.png", correct: false } //3
        ]
    },
    {
        soal: "https://image2url.com/images/1766420719511-e8e69cd6-6cd6-4087-9b85-c504953a26cb.png", //9 15+3
        answers: [
            { img: "https://image2url.com/images/1766420308335-a78c2e14-7297-4b45-9e6a-a43c1a4c62ea.png", correct: true }, //18
            { img: "https://image2url.com/images/1766065752680-815029d0-b689-4d71-85c9-5acfa039eeac.png", correct: false }, //7
            { img: "https://image2url.com/images/1766420151549-7f0e92aa-1cdb-4298-ae23-c51887c549b8.png", correct: false } //12
        ]
    },
    {
        soal: "https://image2url.com/images/1766420735349-0d63533b-4c9e-484e-9f5e-173ae8ca0bff.png", //10 19-6
        answers: [
            { img: "https://image2url.com/images/1766064924737-6128406e-78b8-4997-acd7-88ab4529dbfd.png", correct: false }, //10
            { img: "https://image2url.com/images/1766420818942-e678ba24-3556-47e8-9d77-d9c318b3b576.png", correct: true }, //13
            { img: "https://image2url.com/images/1766420991997-3ecae7e7-4292-4537-950b-369efd5fa51f.png", correct: false } //2
        ]
    },
];

let questions = [];
let current = 0;

function shuffle(array){ /* sama seperti kode awal */ return array; }

function initGame() {
    questions = shuffle([...questionsData]).slice(0,10);
    current=0;
    loadQuestion();
}

function loadQuestion(){
    const feedback = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");
    feedback.style.opacity = 0;
    nextBtn.style.opacity = 0;
    nextBtn.style.pointerEvents = "none";

    const dropZone = document.getElementById("dropZone");
    dropZone.innerHTML = "";

    const q = questions[current];
    document.getElementById("questionImg").src = q.soal;

    const answersContainer = document.getElementById("answers");
    answersContainer.innerHTML = "";

    q.answers.forEach(a=>{
        const img=document.createElement("img");
        img.src = a.img;
        img.className = "answer";
        img.draggable = true;
        img.dataset.correct = a.correct;
        img.id = "answer_"+Math.random().toString(36).substr(2,9);

        img.addEventListener("dragstart", e=>{
            e.dataTransfer.setData("correct", a.correct);
            e.dataTransfer.setData("imgId", img.id);
        });
        answersContainer.appendChild(img);
    });
}

// Panel Setting
const overlay=document.getElementById("overlay");
const settingPanel=document.getElementById("settingPanel");
const closeSetting=document.getElementById("closeSetting");
const volumeSlider=document.getElementById("volumeSlider");
const muteInPanelImg=document.getElementById("muteInPanelImg");
const homeIcon=document.getElementById("homeIcon");
const settingBtn=document.getElementById("settingBtnImg");
const bgMusic=document.getElementById("bgMusic");

settingBtn.addEventListener("click",()=>{ settingPanel.classList.add("active"); overlay.classList.add("active"); });
closeSetting.addEventListener("click",()=>{ settingPanel.classList.remove("active"); overlay.classList.remove("active"); });
overlay.addEventListener("click",()=>{ settingPanel.classList.remove("active"); overlay.classList.remove("active"); });
volumeSlider.addEventListener("input", ()=> bgMusic.volume = volumeSlider.value);
muteInPanelImg.addEventListener("click", ()=>{
    bgMusic.muted = !bgMusic.muted;
    muteInPanelImg.src = bgMusic.muted
        ? "https://image2url.com/images/1763955396010-0b7b0c78-8f9e-4cb0-8045-cd4dfd6acbd3.png"
        : "https://image2url.com/images/1763955187976-61e3ab1a-0b3b-47c3-8ab0-8f66ccfe1b72.png";
});
homeIcon.addEventListener("click", ()=>{ window.location.href="menu_page.html"; });

// Drop Logic
const dropZone = document.getElementById("dropZone");
dropZone.addEventListener("dragover", e=> e.preventDefault());
dropZone.addEventListener("drop", e=>{
    const isCorrect = e.dataTransfer.getData("correct") === "true";
    const feedback = document.getElementById("feedback");
    const soundTrue = document.getElementById("soundTrue");
    const soundFalse = document.getElementById("soundFalse");
    const nextBtn = document.getElementById("nextBtn");

    if(isCorrect){
        playSound(soundTrue);
        feedback.src = "https://image2url.com/images/1766419521610-459c23d4-ef52-4385-9ad4-8cfca975e6df.png";
        feedback.style.opacity = 1;

        const imgId = e.dataTransfer.getData("imgId");
        const originalImg = document.getElementById(imgId);
        const clone = originalImg.cloneNode(true);
        clone.style.width = "100px";
        clone.draggable = false;
        dropZone.appendChild(clone);

        setTimeout(()=>{
            feedback.style.opacity = 0;
            if(current<questions.length-1){
                nextBtn.style.opacity = 1;
                nextBtn.style.pointerEvents = "auto";
            } else {
                document.getElementById("endScreen").style.display = "block";
                setTimeout(()=>{ window.location.href="menu_pilihan.html"; }, 3000);
            }
        },1500);
    } else {
        playSound(soundFalse);
        feedback.src = "https://image2url.com/images/1766419688103-2e06de5e-7739-4251-b3e6-212c69e41d55.png";
        feedback.style.opacity = 1;
        setTimeout(()=> feedback.style.opacity=0, 1500);
    }
});

document.getElementById("nextBtn").addEventListener("click", ()=>{
    playSound(document.getElementById("soundNext"));
    current++;
    loadQuestion();
});

// Auto play bgMusic
document.addEventListener("click", ()=>{ bgMusic.play(); }, { once:true });
function playSound(audio){ audio.pause(); audio.currentTime=0; audio.play(); }

// Init
initGame();
</script>
</body>
</html>
